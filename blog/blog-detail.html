<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sage | Blog</title>
    <link rel="stylesheet" href="../css/main.desktop.css" />
    <link rel="shortcut icon" href="../assets/logo.png" type="image/png" />
    <link
      rel="stylesheet"
      media="screen and (max-width: 720px)"
      href="../css/main.mobile.css"
    />
    <script
      src="https://kit.fontawesome.com/891622f836.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div id="loading-wrapper">
      <div id="loader"></div>
    </div>
    <main class="main-container">
      <nav class="nav-container">
        <div class="nav-top">
          <div class="nav-logo">
            <img src="../assets/logo.png" alt="logo" />
            <div>
              <p>sage</p>
              <p>ishimwe</p>
            </div>
          </div>
          <div class="nav-hamburger">
            <svg
              width="24"
              height="24"
              xmlns="http://www.w3.org/2000/svg"
              fill-rule="evenodd"
              clip-rule="evenodd"
            >
              <path d="M0 0h24v24H0z" fill="none" />
              <path
                d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"
                fill="#000"
              />
            </svg>
          </div>
        </div>

        <ul class="nav-links">
          <li><a href="../index.html">Home</a></li>
          <li><a href="../index.html#about">About</a></li>
          <li><a href="../index.html#service">Services</a></li>
          <li><a href="./blog.html">Blog</a></li>
          <li><a href="../index.html#portfolio">Portfolio</a></li>
          <li><a href="../index.html#contact">Contact</a></li>
          <button class="nav-btn">Get a Quote</button>
        </ul>
      </nav>
    </main>

    <main class="main-container">
      <div class="blog-image">
        <img src="../assets/blog1.jpg" alt="blog header" />
      </div>
      <section class="blog-head">
        <article>
          <h1 class="blog-title">
            Software Engineer vs Software <br />
            Developer as a senior
          </h1>
          <h6><span>By Sage Ishimwe</span> | <span>May 20, 2024</span></h6>
        </article>
        <div class="blog-reactions">
          <div class="blog-reaction">
            <i class="fa fa-lg fa-thumbs-up"></i>
            <p>100</p>
          </div>
          <div class="blog-reaction">
            <i class="fa fa-lg fa-thumbs-down"></i>
            <p>10</p>
          </div>
          <div class="blog-reaction">
            <i class="fa fa-lg fa-comments"></i>
            <p>20</p>
          </div>
        </div>
      </section>
      <hr />
      <div class="blog-description"></div>
      <section class="comments">
        <h3>Comments</h3>
        <div class="comment">
          <div class="comment-user">
            <img src="../assets/logo.png" alt="user" />
            <div>
              <h5>John Doe</h5>
              <p>May 20, 2025</p>
            </div>
            <div class="reply">
              <img
                height="20px"
                width="20px"
                src="../assets/reply.svg"
                alt="reply"
              />
              <a href="#">Reply</a>
            </div>
          </div>
          <p>this is a comment</p>
        </div>
        <div class="leave-comment">
          <h1>Leave a Comment</h1>
          <textarea cols="15" placeholder="Write Comment"></textarea>
          <button>Comment</button>
        </div>
      </section>
    </main>
    <footer>
      <div class="footer-container">
        <div class="footer-logo">
          <div class="s-logo">
            <span>S</span>
          </div>
          <div>
            <p>ishimwe sage</p>
            <p>Software Developer</p>
          </div>
        </div>

        <ul class="footer-links">
          <li><a href="#">Home</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Services</a></li>
          <li><a href="./blog/blog.html">Blog</a></li>
          <li><a href="#">Portfolio</a></li>
          <li><a href="#">Contact</a></li>
        </ul>

        <div class="footer-socials">
          <a href="#" target="_blank"
            ><i class="fa fa-lg fa-brands fa-github"></i
          ></a>
          <a href="#" target="_blank">
            <i class="fa fa-lg fa-brands fa-twitter"></i>
          </a>
          <a href="http://" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-lg fa-brands fa-linkedin"></i>
          </a>
          <a href="http://" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-lg fa-brands fa-figma"></i>
          </a>
          <a href="http://" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-lg fa-brands fa-instagram"></i>
          </a>
          <a href="http://" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-lg fa-brands fa-pinterest-p"></i>
          </a>
        </div>
      </div>
      <hr />
      <div class="footer-credits">
        <p>&copy; 2024 Sage Ishimwe</p>
        <p style="font-size: 12px">Designed and Developed by Sage Ishimwe</p>
      </div>
    </footer>
    <script>
      window.addEventListener("load", () => {
        const loader = document.getElementById("loader");
        loader.style.opacity = 0;
        loader.style.display = "none";
      });
      const urlParams = new URLSearchParams(window.location.search);
      const blogId = urlParams.get("blogId");
      console.log("blog id", blogId);
      const blogs = JSON.parse(localStorage.getItem("blogs"));
      const blog = blogs.find((b) => b.uuid === blogId);
      console.log("blog", blog);
      if (blog === undefined) {
        window.location.href = "./blog.html";
      }
      const blogImage = document.querySelector(".blog-image img");
      const blogTitle = document.querySelector(".blog-title");
      const blogAuthor = document.querySelector(".blog-head span:first-child");
      const blogDate = document.querySelector(".blog-head span:last-child");
      const blogLikes = document.querySelector(".blog-reaction:first-child p");
      const blogDislikes = document.querySelector(
        ".blog-reaction:nth-child(2) p"
      );
      const blogComments = document.querySelector(
        ".blog-reaction:last-child p"
      );
      const blogDescription = document.querySelector(".blog-description");
      blogImage.src = blog.image;
      blogTitle.textContent = blog.title;
      blogAuthor.textContent = "By " + blog.author || "sage";
      blogDate.textContent = blog.createdAt;
      blogDescription.innerHTML = blog.content;
      blogLikes.textContent = blog.likes.length || 0;
      blogDislikes.textContent = blog.dislikes.length || 0; // Set the dislikes text to the number of dislikes
      blogComments.textContent = blog.comments.length || 0; // Set the comments text to the number of comments

      const comments = blog.comments;

      const commentsSection = document.querySelector(".comments");

      // Create a function that takes a comment object and returns an HTML string
      const createCommentHTML = (comment) => {
        // Use template literals to create an HTML string for the comment
        return `
    <div class="comment">
      <div class="comment-user">
        <img src="${comment.userImage}" alt="user" />
        <div>
          <h5>${comment.userName}</h5>
          <p>${comment.date}</p>
        </div>
        <div class="reply">
          <img
            height="20px"
            width="20px"
            src="../assets/reply.svg"
            alt="reply"
          />
          <a href="#">Reply</a>
        </div>
      </div>
      <p>${comment.text}</p>
    </div>
  `;
      };

      // Use the map method to create a new array of HTML strings for each comment
      const commentsHTML = comments.map(createCommentHTML);

      // Join the array of HTML strings into one HTML string
      const commentsHTMLString = commentsHTML.join("");

      // Set the innerHTML of the comments section element to the comments HTML string
      commentsSection.innerHTML = commentsHTMLString;
    </script>
  </body>
</html>
